# Product Requirements Document (PRD) - TGeasy

## 1. Обзор продукта

### 1.1 Видение продукта
TGeasy - это SaaS-платформа, которая автоматизирует рутинную работу админов телеграм-каналов по управлению рекламными кампаниями, обеспечивая юридическое соответствие требованиям маркировки рекламы и предоставляя детальную аналитику.

### 1.2 Проблема
Админы телеграм-каналов тратят 10-15 часов в неделю на ручную работу:
- Проверка корректности размещения рекламных постов
- Сложность одновременного отслеживания постов в нескольких каналах
- Времязатратный процесс сбора статистики и сведения данных за период
- Ручная маркировка рекламы в соответствии с законодательством
- Ведение договоров и документооборота

### 1.3 Целевая аудитория

#### Идеальный клиент-пользователь (ICP)
- **Основная роль**: Админ телеграм-канала (владелец или наемный администратор)
- **Масштаб деятельности**: Управляют каналом или сеткой каналов с 10+ размещений в месяц
- **Средняя стоимость размещения**: 35,000 рублей
- **Дополнительные обязанности**: 
  - Подписание договоров
  - Маркировка рекламы (доплата 2-5k рублей)
  - Отчетность по эффективности кампаний
- **Болевые точки**: Нехватка времени на рутинные операции, риски ошибок при большом объеме

#### Вторичная аудитория
- Рекламодатели, которые получают доступ к статистике через публичные ссылки
- Маркетинговые агентства, управляющие рекламными кампаниями

## 2. Функциональные требования

### 2.1 Аутентификация и управление пользователями

#### 2.1.1 Вход в систему
- **Обязательно**: Авторизация через Telegram аккаунт
- Автоматическое создание профиля пользователя при первом входе
- JWT токены для поддержания сессий
- Возможность выхода из системы

#### 2.1.2 Роли и права доступа (MVP)
- **Владелец канала**: полный доступ ко всем функциям канала
- **Админ канала**: доступ к созданию кампаний и просмотру аналитики
- Управление ролями через интерфейс настроек

### 2.2 Управление Telegram каналами

#### 2.2.1 Подключение каналов
- Подключение нескольких каналов к одному аккаунту
- Автоматическая проверка прав администратора через Telegram Bot API
- Отображение информации о канале (название, количество подписчиков)
- Мониторинг статуса подключения

#### 2.2.2 Настройки каналов
- Добавление/удаление администраторов канала
- Настройки по умолчанию для новых кампаний
- История изменений прав доступа

### 2.3 Управление договорами

#### 2.3.1 Хранение договоров
- Загрузка файлов договоров (PDF, DOC, DOCX)
- Создание шаблонов договоров
- Поиск и фильтрация по договорам
- Привязка договоров к рекламодателям

#### 2.3.2 Работа с договорами
- Выбор договора при создании кампании
- Отслеживание статуса подписания
- Уведомления о истечении сроков договоров

### 2.4 Создание и управление кампаниями

#### 2.4.1 Создание кампании
- **Обязательные поля**:
  - Название кампании
  - Выбор канала для размещения
  - Информация о рекламодателе (ИНН, наименование)
  - Описание товара/услуги
- **Опциональные поля**:
  - Привязка к договору
  - Бюджет кампании
  - Период проведения

#### 2.4.2 Управление креативами
- Загрузка текстового контента (до 4096 символов)
- Загрузка изображений (JPEG, PNG, до 10MB)
- Добавление ссылок на целевые страницы
- Предварительный просмотр поста

#### 2.4.3 Маркировка рекламы
- **Автоматическая интеграция с ОРД Яндекса**:
  - Регистрация креатива в ОРД
  - Получение ERID кода
  - Автоматическое добавление маркировки к посту
- Возможность ручного редактирования маркировки
- Отслеживание статуса регистрации в ОРД

### 2.5 Планирование и публикация

#### 2.5.1 Планирование постов
- Выбор даты и времени публикации
- Возможность немедленной публикации
- Календарный вид планируемых постов
- Редактирование запланированных постов

#### 2.5.2 Автоматическая публикация
- **Интеграция с Telegram Bot API** для автопостинга
- Подтверждение успешной публикации
- Обработка ошибок публикации
- Уведомления о статусе публикации

### 2.6 Аналитика и отчетность

#### 2.6.1 Сбор метрик
- **Основные метрики через Telegram Bot API**:
  - Просмотры (views)
  - Engagement Rate (ER)
  - Подписки/отписки
  - Клики по ссылкам
  - Реакции и комментарии
- Автоматическое обновление метрик каждые 15 минут
- Исторические данные по постам

#### 2.6.2 Дашборды
- Общий дашборд с ключевыми метриками
- Детальная аналитика по каждой кампании
- Сравнение производительности каналов
- Графики и диаграммы для визуализации данных

#### 2.6.3 Экспорт данных
- **Экспорт в Excel** с настраиваемыми параметрами:
  - Период данных
  - Выбор метрик
  - Группировка по каналам/кампаниям
- Автоматическая генерация отчетов по расписанию
- Сохранение шаблонов отчетов

#### 2.6.4 Публичные ссылки
- Генерация публичных ссылок для рекламодателей
- Доступ к статистике без регистрации
- Настройка периода доступности ссылки
- Брендинг публичных страниц

### 2.7 Платежная система

#### 2.7.1 Тарифные планы
- **Базовый план: 3,490₽/месяц** - до 20 размещений
- **Профессиональный план: 6,990₽/месяц** - до 50 размещений  
- **Корпоративный план: 12,990₽/месяц** - без ограничений
- Возможность смены тарифа в любое время

#### 2.7.2 Платежи через ЮКасса
- Ежемесячная подписочная модель
- Автоматическое продление подписки
- Поддержка банковских карт
- Генерация документов для юридических лиц

#### 2.7.3 Управление подпиской
- Просмотр текущего тарифа и использования
- История платежей
- Отмена подписки
- Уведомления о предстоящих списаниях

### 2.8 Уведомления

#### 2.8.1 Telegram уведомления
- Успешная публикация поста
- Ошибки при публикации
- Достижение лимитов тарифного плана
- Необходимость продления подписки
- Еженедельные сводки по аналитике

#### 2.8.2 Настройки уведомлений
- Включение/отключение типов уведомлений
- Выбор времени отправки сводок
- Настройка получателей уведомлений

## 3. Нефункциональные требования

### 3.1 Производительность
- **Время отклика API**: < 500ms для 95% запросов
- **Время загрузки страниц**: < 2 секунд
- **Доступность системы**: 99.5% uptime
- **Concurrent users**: поддержка до 200 одновременных пользователей

### 3.2 Масштабируемость
- **Начальная нагрузка**: 10 пользователей, 200 размещений/месяц
- **Целевая нагрузка**: 100 пользователей, 2500 размещений/месяц через год
- Горизонтальное масштабирование через Vercel Serverless
- Автоматическое масштабирование базы данных Supabase

### 3.3 Безопасность
- Шифрование данных в покое и при передаче
- Регулярные бэкапы базы данных
- Аудит доступа к чувствительным данным
- Соответствие требованиям 152-ФЗ

### 3.4 Совместимость
- Поддержка современных браузеров (Chrome 90+, Firefox 88+, Safari 14+)
- Адаптивный дизайн для мобильных устройств
- PWA возможности для мобильного использования

## 4. Пользовательские сценарии

### 4.1 Сценарий 1: Создание и публикация первой кампании

**Актор**: Новый пользователь (админ канала)
**Предусловие**: Пользователь зарегистрировался через Telegram

**Основной поток**:
1. Пользователь подключает свой Telegram канал
2. Система проверяет права администратора
3. Пользователь создает новую кампанию
4. Заполняет информацию о рекламодателе
5. Загружает креатив (текст + изображение)
6. Система автоматически регистрирует креатив в ОРД Яндекса
7. Получает ERID и добавляет маркировку
8. Планирует публикацию на завтра в 10:00
9. Система отправляет уведомление о создании кампании

**Результат**: Кампания создана и запланирована к публикации

### 4.2 Сценарий 2: Просмотр аналитики и создание отчета

**Актор**: Опытный пользователь (админ канала)
**Предусловие**: У пользователя есть опубликованные кампании

**Основной поток**:
1. Пользователь переходит в раздел аналитики
2. Выбирает период за последний месяц
3. Просматривает общую статистику по всем каналам
4. Открывает детальную аналитику конкретной кампании
5. Создает публичную ссылку для рекламодателя
6. Экспортирует детальный отчет в Excel
7. Отправляет ссылку и отчет рекламодателю

**Результат**: Отчет создан и передан рекламодателю

### 4.3 Сценарий 3: Управление подпиской

**Актор**: Пользователь на базовом тарифе
**Предусловие**: Пользователь приближается к лимиту размещений

**Основной поток**:
1. Система отправляет уведомление о приближении к лимиту
2. Пользователь переходит в настройки подписки
3. Сравнивает тарифные планы
4. Выбирает профессиональный план
5. Проходит процедуру оплаты через ЮКассу
6. Система обновляет лимиты
7. Пользователь получает подтверждение смены тарифа

**Результат**: Тариф повышен, лимиты увеличены

## 5. Ограничения и допущения

### 5.1 Технические ограничения
- Зависимость от Telegram Bot API (лимиты запросов)
- Ограничения ОРД Яндекса по регистрации креативов
- Лимиты файлового хранилища Supabase
- Ограничения Vercel на время выполнения функций (10 секунд)

### 5.2 Бизнес-ограничения
- Работа только с российскими рекламодателями (ОРД)
- Поддержка только рублевых платежей
- Ограничение на размер загружаемых файлов (10MB)

### 5.3 Допущения
- Пользователи имеют права администратора в своих каналах
- Rекламодатели согласны на получение статистики через публичные ссылки
- Стабильная работа внешних API (Telegram, ОРД, ЮКасса)

## 6. Критерии успеха

### 6.1 Бизнес-метрики
- **Retention Rate**: 80% пользователей активны через 3 месяца
- **Conversion Rate**: 15% trial пользователей переходят на платные планы
- **ARPU (Average Revenue Per User)**: 5,000₽/месяц
- **Churn Rate**: < 5% в месяц

### 6.2 Продуктовые метрики
- **Time to First Value**: пользователь создает первую кампанию в течение 30 минут
- **Feature Adoption**: 90% пользователей используют аналитику
- **Support Tickets**: < 5% пользователей обращаются в поддержку ежемесячно

### 6.3 Технические метрики
- **API Response Time**: 95% запросов < 500ms
- **System Uptime**: > 99.5%
- **Error Rate**: < 1% ошибок в критических операциях

## 7. Дорожная карта развития

### 7.1 MVP (Месяцы 1-3)
- Базовая аутентификация через Telegram
- Управление каналами и кампаниями
- Интеграция с ОРД Яндекса
- Автопостинг через Telegram Bot API
- Базовая аналитика и экспорт в Excel
- Платежная система ЮКасса

### 7.2 Версия 2.0 (Месяцы 4-6)
- Расширенная аналитика с прогнозами
- Автоматические отчеты по расписанию
- API для интеграции с внешними системами
- Мобильное приложение
- Система уведомлений в реальном времени

### 7.3 Версия 3.0 (Месяцы 7-12)
- AI-ассистент для оптимизации кампаний
- Интеграция с другими мессенджерами
- Marketplace шаблонов креативов
- Белый лейбл для агентств
- Расширенная система ролей и прав